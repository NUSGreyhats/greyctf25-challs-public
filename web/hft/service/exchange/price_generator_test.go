package exchange

import (
	"testing"
	"time"
)

func TestPriceGenerator(t *testing.T) {
	location, _ := time.LoadLocation("Asia/Singapore")
	now := time.Date(2025, 4, 20, 13, 46, 56, 174049300, location)

	expected := []uint32{
		83721250,
		70585780,
		83624617,
		76111427,
		92846562,
		98367048,
		86947900,
		87673064,
		70644897,
		75476820,
		77249562,
		84426187,
		80572358,
		92504426,
		86992850,
		79452204,
		67872685,
		50999820,
		55057363,
		47445331,
		40892741,
		53385973,
		48951888,
		41505029,
		23198886,
		35654562,
		48733677,
		35078977,
		46932413,
		65170499,
		59445300,
		49616236,
		52709629,
		53087314,
		50975459,
		45272205,
		40646910,
		50947848,
		46242990,
		53301118,
		73182313,
		69112225,
		68812511,
		74499740,
		78817310,
		64569267,
		58780120,
		48842366,
		47188940,
		37075442,
		54891376,
		74364519,
		79324305,
		83462370,
		83084158,
		92425729,
		99001161,
		80791051,
		76246753,
		67455899,
	}
	i := 0
	for v := range PriceGenerator("amogus", now) {
		if v != expected[i] {
			t.Errorf("Expected %v, got %v at position %v", v, expected[i], i)
			return
		}
		i += 1
		if i == 60 {
			break
		}
	}
}
